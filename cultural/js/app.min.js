var winW=$(window).width(),winH=$(window).height(),hashtags_info=[],$fullscreen_wrapper=$(".fullscreen-wrapper"),$slider=$("#slider"),$scroll_pane=$(".scroll-pane"),$scroll_content=$(".scroll-content"),scroll_items=$(".scroll-content-item"),art_items=$(".scroll-content-item.art-piece"),center_item=$(".scroll-content-item.intro"),numInView=3,extraNum=4,side_padding=100,itemW=winW/numInView,last_item_index=scroll_items.length-1,win_center_left=.33*winW,win_center_right=.66*winW,showSliderTip=function(){$(".intro").position().left>=0&&$(".intro").position().left<10?$(".slider-tip").fadeIn():$(".slider-tip").fadeOut()},initSlider=function(){$slider.slider({start:function(){closeItem(),showSliderTip()},slide:function(e,t){var i=Math.round(t.value/100*($scroll_content.width()-winW));$scroll_pane.scrollLeft(i),showSliderTip()},stop:function(){showSliderTip()}})},openItem=function(){if(center_item.hasClass("in-view")&&0!==center_item.index()&&center_item.index()!==last_item_index&&(center_item.addClass("open"),center_item.width(winW-2*side_padding),center_item.find(".content-wrapper").width(winW-2*side_padding+16),$scroll_pane.animate({scrollLeft:center_item[0].offsetLeft-side_padding-4}),$scroll_content.width((scroll_items.length-1)*itemW+itemW*extraNum+winW-2*side_padding),showContent(center_item.attr("data-art-index"),center_item),$(".slider-wrapper.slider-handle").fadeOut(function(){$(".slider").addClass("grey")}),$(".s-diamond").addClass("grey"),$(".slider-steps").fadeOut(function(){$(".slider-steps").addClass("grey")})),center_item.hasClass("intro")){var e=0;$slider.slider("value",e),$scroll_content.animate({"margin-left":Math.round(e/100*($scroll_pane.width()-$scroll_content.width()))+"px"})}else if(center_item.hasClass("endtro")){var e=100;$slider.slider("value",e),$scroll_content.animate({"margin-left":Math.round(e/100*($scroll_pane.width()-$scroll_content.width()))+"px"})}},showContent=function(e,t){var i=e,n=""!==hashtags_info[i].artist.website?'<a href="'+hashtags_info[i].artist.website+'" class="web" target="_blank"></a>':"",s=""!==hashtags_info[i].artist.twitter?'<a href="https://twitter.com/'+hashtags_info[i].artist.twitter+'" class="twitter" target="_blank"></a>':"",a=void 0!==hashtags_info[i].media_embed?'<div class="video-wrapper">'+hashtags_info[i].media_embed+"</div>":'<img src="'+hashtags_info[i].media_url+'" />',r=""!==hashtags_info[i].artist.hometown?hashtags_info[i].artist.title+"<br><em>contact</em> "+hashtags_info[i].artist.hometown:hashtags_info[i].artist.title;t.find(".detail-wrapper").append('<div class="art">'+a+'<span class="view-fullscreen">View Fullscreen</span></div>\n      <div class="art-info">\n        <span class="info-title">Description</span>\n        <p>'+hashtags_info[i].description+'</p>\n        <span class="info-title">Rules</span>\n        <p>'+r+'</p>\n        <div class="contact">'+n+s+'</div>\n        <a href="register/'+hashtags_info[i].hashtag+'" class="simple-btn tag-btn" target="_blank"  onclick="ga("send", "event", "View Posts", "click", "#"'+hashtags_info[i].hashtag+');">Register</a>\n        <span class="close-item">Close</span>\n      </div>'),t.find(".info-title").css("color",hashtags_info[i].main_color),t.find(".detail-wrapper .tag-btn").css("background-color",hashtags_info[i].main_color),setTimeout(function(){t.find(".detail-wrapper").fadeIn()},300)},closeItem=function(){winW>=768?(center_item.width(itemW),center_item.removeClass("open"),resizeItems(),center_item.find(".info-title").removeAttr("style"),center_item.find(".detail-wrapper").fadeOut(100).empty(),center_item.find(".content-wrapper").removeAttr("style"),$(".slider-wrapper.slider-handle").fadeIn(),$(".slider-steps").fadeIn(),$(".s-diamond").removeClass("grey"),$(".slider").removeClass("grey").removeClass("disabled"),$(".slider-steps").removeClass("grey")):($("html,body").animate({scrollTop:center_item.offset().top}),center_item.removeClass("open"),center_item.removeClass("in-view"),center_item.find(".info-title").removeAttr("style"),center_item.find(".detail-wrapper").fadeOut(100).empty())},setHashtags=function(){$.getJSON("hashtags.json",function(e){hashtags_info=e.hashtags,$.each(e.hashtags,function(e,t){$(art_items[e]).attr("data-art-index",e),$(art_items[e]).find(".overlay").css({backgroundColor:"#000"}),$(art_items[e]).css("background-image","url("+t.media_url+")"),$(art_items[e]).find(".title").text(t.hashtag),$(art_items[e]).find(".artist-name").text(t.artist.name)})})},resizeItems=function(){itemW=winW/numInView,winW>=768?($(scroll_items).width(itemW),$(scroll_items[0]).width(winW),$(scroll_items[scroll_items.length-1]).width(winW),$scroll_content.width(scroll_items.length*itemW+itemW*extraNum),$(scroll_items).find(".content-wrapper").removeAttr("style")):($scroll_content.removeAttr("style"),$(scroll_items).css({width:"100%","margin-left":0}),$(scroll_items).find(".content-wrapper").removeAttr("style"))},resized=function(){winW=$(window).width(),winH=$(window).height(),winW>=1024?(numInView=3,extraNum=4,win_center_left=.33*winW,win_center_right=.66*winW):winW>=768&&1024>winW?(numInView=2,extraNum=2,win_center_left=.5*winW,win_center_right=.95*winW):(numInView=1,extraNum=0,win_center_left=.05*winW,win_center_right=.95*winW),$(".scroll-content-item.open").length>0&&winW>=768&&closeItem(),resizeItems(),setTimeout(function(){var e=$(".scroll-pane").scrollLeft()/($scroll_content.width()-winW)*100;$slider.slider("value",e)},100),$fullscreen_wrapper.find(".media-wrapper").height(winH),$fullscreen_wrapper.fadeOut(function(){$fullscreen_wrapper.find(".media-wrapper").empty()})};$(".s-diamond").on("click",function(){if($(".scroll-content-item.open").length>0&&!$(this).hasClass("disabled")){var e=$(".scroll-content-item.open").attr("data-art-index");if($(this).hasClass("next"))var t=parseInt(e)+1;else if($(this).hasClass("prev"))var t=parseInt(e)-1;closeItem(),setTimeout(function(){center_item=$('.scroll-content-item[data-art-index="'+t+'"]'),center_item.addClass("open in-view"),openItem()},360),0===t?($(".s-diamond.prev").addClass("disabled"),$(".s-diamond.next").removeClass("disabled")):t===art_items.length-1?($(".s-diamond.next").addClass("disabled"),$(".s-diamond.prev").removeClass("disabled")):$(".s-diamond").hasClass("disabled")&&$(".s-diamond").removeClass("disabled")}}),$(scroll_items).on("click",function(e){if(0===$(".scroll-content-item.open").length&&!($(this).hasClass("open")||$(this).hasClass("intro")||$(this).hasClass("endtro")||$(e.target).hasClass("close-item"))){if(center_item=$(this),$(this).addClass("open in-view"),winW>=768){openItem();var t=parseInt($(this).attr("data-art-index"));0===t?($(".s-diamond.prev").addClass("disabled"),$(".s-diamond.next").removeClass("disabled")):t===art_items.length-1?($(".s-diamond.next").addClass("disabled"),$(".s-diamond.prev").removeClass("disabled")):$(".s-diamond").hasClass("disabled")&&$(".s-diamond").removeClass("disabled")}else showContent($(this).attr("data-art-index"),$(this)),$("html,body").animate({scrollTop:$(this).offset().top});ga("send","event","Open Hashtag Item","click",$(this).find(".intro-wrapper .title").text())}}),$(scroll_items).on("click",".close-item",closeItem),$(".scroll-pane").mousewheel(function(e,t){}),$(".social-share").on("click",".social",function(e){e.preventDefault();var t=$(this).attr("href"),i=$(this).attr("data-share-title"),n=600,s=500,a=window.open(t,i,"width="+n+",height="+s);a.focus()}),$(".scroll-content-item").on("click",".view-fullscreen",function(){var e;$(".scroll-content-item.open").find(".art img").length>0?e=$(".scroll-content-item.open").find(".art img").clone():$(".scroll-content-item.open").find(".art .video-wrapper").length>0&&(e=$(".scroll-content-item.open").find(".art .video-wrapper").clone()),$fullscreen_wrapper.find(".media-wrapper").append(e),$fullscreen_wrapper.find(".media-wrapper").height(winH),$fullscreen_wrapper.fadeIn()}),$fullscreen_wrapper.on("click",".close-btn",function(){$fullscreen_wrapper.fadeOut(function(){$fullscreen_wrapper.find(".media-wrapper").empty()})}),$(window).on("resize",resized),$(window).load(function(){$(".site-loader").addClass("loaded").fadeOut()}),$(document).ready(function(){winW>=1024?(numInView=3,extraNum=4,win_center_left=.33*winW,win_center_right=.66*winW):winW>=768&&1024>winW?(numInView=2,extraNum=2,win_center_left=.25*winW,win_center_right=.75*winW):(numInView=1,extraNum=0,win_center_left=.05*winW,win_center_right=.95*winW),itemW=winW/numInView,setHashtags(),resizeItems(),initSlider(),setTimeout(function(){$(".site-loader").hasClass("loaded")||$(".site-loader").addClass("loaded").fadeOut()},1e4)});